# Hasten Smart Contracts v1

Solidity and Flow contracts to support **hasten.app** NFTs and FTs.

## Rough costs

### Uploading a Script
https://goerli.etherscan.io/tx/0x722548d6d6b3254947b3ff4510833b182a36dc7f8fcd46e6a862a68226e32d38
```
Gas Used by Transaction:
617,608 (66.67%)
[info] [2021-04-06 11:11:30.798] [T-6818088] [logging.cpp::51] [Main] compressed source size: 337
[info] [2021-04-06 11:11:30.808] [T-6818088] [logging.cpp::51] [Main] compressed env size: 286
```

## Deterministic contracts (EVM chains)

The following raw transactions can be used by anyone to deploy Hasten contracts to any chain.

The resulting contracts will have always the same address no matter on which chain they are.

More details here https://eips.ethereum.org/EIPS/eip-2470

### FragmentProxyAdmin

Gas Used by Transaction:
703,956 (70.4%)

```
0x608060405234801561001057600080fd5b50737f7ef2f9d8b0106ce76f66940ef7fc0a3b23c9746100388164010000000061003e810204565b50610089565b60008054600160a060020a031916600160a060020a03831690811782556040519091907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908290a350565b610b59806100986000396000f3fe608060405260043610610098576000357c0100000000000000000000000000000000000000000000000000000000900480639623609d1161006b5780639623609d1461014857806399a88ec41461015b578063f2fde38b1461017b578063f3b7dead1461019b57610098565b8063204e1c7a1461009d578063715018a6146100e65780637eff275e146100fd5780638da5cb5b1461011d575b600080fd5b3480156100a957600080fd5b506100bd6100b83660046108da565b6101bb565b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390f35b3480156100f257600080fd5b506100fb610272565b005b34801561010957600080fd5b506100fb610118366004610919565b610383565b34801561012957600080fd5b5060005473ffffffffffffffffffffffffffffffffffffffff166100bd565b6100fb610156366004610951565b6104a6565b34801561016757600080fd5b506100fb610176366004610919565b6105d0565b34801561018757600080fd5b506100fb6101963660046108da565b6106c1565b3480156101a757600080fd5b506100bd6101b63660046108da565b61088e565b60008060008373ffffffffffffffffffffffffffffffffffffffff16604051610207907f5c60da1b00000000000000000000000000000000000000000000000000000000815260040190565b600060405180830381855afa9150503d8060008114610242576040519150601f19603f3d011682016040523d82523d6000602084013e610247565b606091505b50915091508161025657600080fd5b8080602001905181019061026a91906108fd565b949350505050565b3361029260005473ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff1614610314576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064015b60405180910390fd5b6000805460405173ffffffffffffffffffffffffffffffffffffffff909116907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908390a3600080547fffffffffffffffffffffffff0000000000000000000000000000000000000000169055565b336103a360005473ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff1614610420576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161030b565b6040517f8f28397000000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff8281166004830152831690638f283970906024015b600060405180830381600087803b15801561048a57600080fd5b505af115801561049e573d6000803e3d6000fd5b505050505050565b336104c660005473ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff1614610543576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161030b565b6040517f4f1ef28600000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff841690634f1ef2869034906105999086908690600401610a40565b6000604051808303818588803b1580156105b257600080fd5b505af11580156105c6573d6000803e3d6000fd5b5050505050505050565b336105f060005473ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff161461066d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161030b565b6040517f3659cfe600000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff8281166004830152831690633659cfe690602401610470565b336106e160005473ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff161461075e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161030b565b73ffffffffffffffffffffffffffffffffffffffff8116610801576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201527f6464726573730000000000000000000000000000000000000000000000000000606482015260840161030b565b6000805460405173ffffffffffffffffffffffffffffffffffffffff808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a3600080547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff92909216919091179055565b60008060008373ffffffffffffffffffffffffffffffffffffffff16604051610207907ff851a44000000000000000000000000000000000000000000000000000000000815260040190565b6000602082840312156108eb578081fd5b81356108f681610afe565b9392505050565b60006020828403121561090e578081fd5b81516108f681610afe565b6000806040838503121561092b578081fd5b823561093681610afe565b9150602083013561094681610afe565b809150509250929050565b600080600060608486031215610965578081fd5b833561097081610afe565b9250602084013561098081610afe565b9150604084013567ffffffffffffffff8082111561099c578283fd5b818601915086601f8301126109af578283fd5b8135818111156109c1576109c1610acf565b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f01168101908382118183101715610a0757610a07610acf565b81604052828152896020848701011115610a1f578586fd5b82602086016020830137856020848301015280955050505050509250925092565b600073ffffffffffffffffffffffffffffffffffffffff8416825260206040818401528351806040850152825b81811015610a8957858101830151858201606001528201610a6d565b81811115610a9a5783606083870101525b50601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe01692909201606001949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b73ffffffffffffffffffffffffffffffffffffffff81168114610b2057600080fd5b5056fea2646970667358221220eba794d204a1924a1677a68689d67f18904ea1184c1491dae6a163b0d48f359a64736f6c63430008030033
```

`{salt: 0xa4e6c10799b0cd771427353bd487dee154fd4f000e364b910639996e4c780098, address: 0xC0FFEEaAd4F914eD5eC6c87DfCE1e453fC16646A}`

### Fragment

Gas Used by Transaction:
5,139,154 (85.65%)

`{salt: "0xb42141bfe7f3f8fec9850423552ab1025d97d05396b66c599c99f0ca874c2147", address: "0xC0DE0BA1f4b227339AFe5b34C9657FA01bb93f4b"}`

### Utility

Gas Used by Transaction:
1,618,103 (80.91%)

`{salt: "0xf9bec84cc32936b9ed4ac6e613fbcb93a3b2728813dab09c2bde1f7e2867cc96", address: "0xB1eAbe2aBE9eb6032e7E9c2A2EAD935Bd62DFda7"}`

### FragmentProxy

Gas Used by Transaction:
701,886 (70.19%)

`{salt: "0x6220630cb337aa1cc2a212388c8a0a11a888c4e0186a44d28975c4eb51b43828", address: "0xC0DE7DD77E69d25A53fE05F8d3fe772654c29162"}`

**CALL BOOTSTRAP AT THIS POINT**

https://goerli.etherscan.io/tx/0x77c8686cc21ca014e9165e930b1a5785e0b9f3538212647b2ec08ed37b95bafa

Entity contract: 0x31B49F6bf08CCf4d82c2C8D455dd0895E7384408
Vault contract: 0xf5cAbf1735Eb187A577A794fdEe5530811507857

### AVAX Factory:

Sadly their gas is off and the EIP-2470 data cannot be used
I used this but means addresses will be different unless we accept to pay more to deploy a new factory on eth:
```
0xf9016c8085746a52880083030d408080b90154608060405234801561001057600080fd5b50610134806100206000396000f3fe6080604052348015600f57600080fd5b506004361060285760003560e01c80634af63f0214602d575b600080fd5b60cf60048036036040811015604157600080fd5b810190602081018135640100000000811115605b57600080fd5b820183602082011115606c57600080fd5b80359060200191846001830284011164010000000083111715608d57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550509135925060eb915050565b604080516001600160a01b039092168252519081900360200190f35b6000818351602085016000f5939250505056fea26469706673582212206b44f8a82cb6b156bfcc3dc6aadd6df4eefd204bc928a4397fd15dacf6d5320564736f6c634300060200331b83247000822470
```

https://cchain.explorer.avax-test.network/address/0x96d372104770465a36F7f05E8175975a2b4B2438/transactions

new one:
Creator: `0x53aab8351206a3eee51096c2be27d6e5ca9c5ecd`
Deployer: `0xe14B5aE0D1E8A4e9039D40e5BF203fD21E2f6241`
Well, this one is already on ETH :)
https://etherscan.io/address/0x53aab8351206a3eee51096c2be27d6e5ca9c5ecd
```
0xf9016c8085746a5288008303c4d88080b90154608060405234801561001057600080fd5b50610134806100206000396000f3fe6080604052348015600f57600080fd5b506004361060285760003560e01c80634af63f0214602d575b600080fd5b60cf60048036036040811015604157600080fd5b810190602081018135640100000000811115605b57600080fd5b820183602082011115606c57600080fd5b80359060200191846001830284011164010000000083111715608d57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550509135925060eb915050565b604080516001600160a01b039092168252519081900360200190f35b6000818351602085016000f5939250505056fea26469706673582212206b44f8a82cb6b156bfcc3dc6aadd6df4eefd204bc928a4397fd15dacf6d5320564736f6c634300060200331b83247000822470
```

To run things via metamask - need to fund the creator account tho

> Max Txn Cost/Fee: 0.1235 Ether ($0.00)

> https://testnet.bscscan.com/tx/0xddacd6ad7f7ceac2940aff799ba2e370d7902e810b2635f0b593d03f6bedd791 BSC

> https://cchain.explorer.avax-test.network/tx/0xddacd6ad7f7ceac2940aff799ba2e370d7902e810b2635f0b593d03f6bedd791/internal-transactions AVAX

> https://explorer-mumbai.maticvigil.com/tx/0xddacd6ad7f7ceac2940aff799ba2e370d7902e810b2635f0b593d03f6bedd791/internal-transactions MATIC

```
await window.ethereum.request({ method: 'eth_requestAccounts' });
await ethereum.request({method: 'eth_sendRawTransaction', params: ["0xf9016c8085746a5288008303c4d88080b90154608060405234801561001057600080fd5b50610134806100206000396000f3fe6080604052348015600f57600080fd5b506004361060285760003560e01c80634af63f0214602d575b600080fd5b60cf60048036036040811015604157600080fd5b810190602081018135640100000000811115605b57600080fd5b820183602082011115606c57600080fd5b80359060200191846001830284011164010000000083111715608d57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550509135925060eb915050565b604080516001600160a01b039092168252519081900360200190f35b6000818351602085016000f5939250505056fea26469706673582212206b44f8a82cb6b156bfcc3dc6aadd6df4eefd204bc928a4397fd15dacf6d5320564736f6c634300060200331b83247000822470"]});
```
